//http://rosettacode.org/wiki/Proper_divisors#Dyalect
func properDivs(n) {
    yield break when n == 1
    
    for x in 1..<n {
        if n % x == 0 {
            yield x
        }
    }
}
 
for i in 1..10 {
    print("\(i): \(properDivs(i).toArray())")
}
 
var (num, max) = (0,0)
 
for i in 1..1000 {
    let count = properDivs(i).len()
    set (num, max) = (i, count) when count > max
}
 
print("\(num): \(max)")